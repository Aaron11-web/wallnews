<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WallNews - Real-Time News & Social Media Aggregator</title>
    <link rel="icon" href="https://public-frontend-cos.metadl.com/mgx/img/favicon.png" type="image/png">
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .news-card { transition: all 0.3s ease; }
        .news-card:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .masonry-grid { column-count: 1; column-gap: 1rem; }
        @media (min-width: 640px) { .masonry-grid { column-count: 2; } }
        @media (min-width: 1024px) { .masonry-grid { column-count: 3; } }
        .masonry-item { break-inside: avoid; margin-bottom: 1rem; }
        .live-indicator { animation: pulse 2s infinite; background: #ef4444; }
        .social-platform-twitter { border-left: 4px solid #1da1f2; }
        .social-platform-instagram { border-left: 4px solid #e4405f; }
        .social-platform-linkedin { border-left: 4px solid #0077b5; }
        .social-platform-reddit { border-left: 4px solid #ff4500; }
        .social-platform-facebook { border-left: 4px solid #1877f2; }
        .social-platform-tiktok { border-left: 4px solid #000000; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 2px solid #fff; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; }
        .fallback-loading { display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 18px; text-align: center; }
    </style>
</head>
<body>
    <div id="root">
        <div class="fallback-loading">
            <div>
                <h2>🌊 WallNews Loading...</h2>
                <p>Real-Time News & Social Media Aggregator</p>
                <div style="margin-top: 20px;"><div class="spinner"></div></div>
            </div>
        </div>
    </div>

    <script type="text/babel">
        // Error handling and fallback wrapper
        (function() {
            try {
                const { useState, useEffect, useContext, createContext, useMemo } = React;
                
                // Simple Icon component with emoji fallbacks
                const Icon = ({ name, className = "w-4 h-4" }) => {
                    const icons = {
                        Search: '🔍', TrendingUp: '📈', RefreshCw: '🔄', ExternalLink: '🔗',
                        Share2: '📤', Heart: '❤️', Eye: '👁️', Clock: '⏰', ChevronDown: '⬇️',
                        ChevronUp: '⬆️', Twitter: '🐦', Linkedin: '💼', Instagram: '📷',
                        Facebook: '📘', Play: '▶️', MessageSquare: '💬', Globe: '🌐'
                    };
                    return React.createElement('span', { 
                        className: `inline-block ${className}`,
                        style: { fontSize: '1em' }
                    }, icons[name] || '•');
                };

                // Mock Data
                const mockNews = [
                    {
                        id: 'news-1', title: 'AI Revolution in Climate Technology',
                        description: 'New AI models are revolutionizing climate prediction and green technology solutions worldwide.',
                        category: 'Technology', publishedAt: new Date().toISOString(), trending: true,
                        sources: [
                            { id: 'techcrunch', name: 'TechCrunch', reliability: 0.9 },
                            { id: 'wired', name: 'Wired', reliability: 0.95 },
                            { id: 'reuters', name: 'Reuters', reliability: 0.98 }
                        ],
                        imageUrl: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=300&fit=crop',
                        views: 12500, likes: 890, shares: 234
                    },
                    {
                        id: 'news-2', title: 'Renewable Energy Breakthrough',
                        description: 'Scientists develop revolutionary solar panel technology with 50% efficiency rate.',
                        category: 'Environment', publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), trending: true,
                        sources: [
                            { id: 'nature', name: 'Nature', reliability: 0.99 },
                            { id: 'sciencedaily', name: 'Science Daily', reliability: 0.85 }
                        ],
                        imageUrl: 'https://images.unsplash.com/photo-1509391366360-2e959784a276?w=400&h=300&fit=crop',
                        views: 8900, likes: 567, shares: 123
                    }
                ];

                const mockSocialPosts = [
                    {
                        id: 'social-1', platform: 'twitter', platformName: 'Twitter', 
                        author: '@TechGuru', authorAvatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face',
                        content: 'The AI revolution is here! Just witnessed amazing demos of climate prediction models. #AI #ClimateChange',
                        timestamp: new Date(Date.now() - 30 * 60 * 1000).toISOString(),
                        likes: 234, shares: 45, comments: 12, verified: true, isLive: false,
                        hashtags: ['#AI', '#ClimateChange']
                    },
                    {
                        id: 'social-2', platform: 'twitter', platformName: 'Twitter',
                        author: '@SpaceNews', authorAvatar: 'https://images.unsplash.com/photo-1464207687429-7505649dae38?w=40&h=40&fit=crop&crop=face',
                        content: '🔴 LIVE: Mars rover discovers potential signs of microbial life! #Mars #Space #LiveUpdate',
                        timestamp: new Date(Date.now() - 5 * 60 * 1000).toISOString(),
                        likes: 2340, shares: 456, comments: 189, verified: true, isLive: true,
                        hashtags: ['#Mars', '#Space', '#LiveUpdate'],
                        mediaUrl: 'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop'
                    }
                ];

                // Context
                const AppContext = createContext();

                function AppProvider({ children }) {
                    const [newsArticles] = useState(mockNews);
                    const [socialPosts, setSocialPosts] = useState(mockSocialPosts);
                    const [selectedCategory, setSelectedCategory] = useState('All');
                    const [selectedPlatforms, setSelectedPlatforms] = useState([]);
                    const [searchQuery, setSearchQuery] = useState('');
                    const [activeTab, setActiveTab] = useState('news');
                    const [loading, setLoading] = useState(false);
                    const [lastRefresh, setLastRefresh] = useState(new Date());

                    const categories = ['All', 'Technology', 'Environment', 'Science', 'Business', 'Health'];
                    const platforms = ['twitter', 'instagram', 'linkedin', 'facebook', 'tiktok', 'reddit'];

                    const filteredNews = useMemo(() => {
                        let filtered = newsArticles;
                        if (selectedCategory !== 'All') {
                            filtered = filtered.filter(article => article.category === selectedCategory);
                        }
                        if (searchQuery) {
                            filtered = filtered.filter(article => 
                                article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                article.description.toLowerCase().includes(searchQuery.toLowerCase())
                            );
                        }
                        return filtered;
                    }, [newsArticles, selectedCategory, searchQuery]);

                    const filteredSocialPosts = useMemo(() => {
                        let filtered = socialPosts;
                        if (selectedPlatforms.length > 0) {
                            filtered = filtered.filter(post => selectedPlatforms.includes(post.platform));
                        }
                        if (searchQuery) {
                            filtered = filtered.filter(post => 
                                post.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                post.hashtags.some(hashtag => hashtag.toLowerCase().includes(searchQuery.toLowerCase()))
                            );
                        }
                        return filtered.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                    }, [socialPosts, selectedPlatforms, searchQuery]);

                    const refreshContent = () => {
                        setLoading(true);
                        setTimeout(() => {
                            setLastRefresh(new Date());
                            setLoading(false);
                        }, 1000);
                    };

                    return React.createElement(AppContext.Provider, {
                        value: {
                            newsArticles: filteredNews, socialPosts: filteredSocialPosts, selectedCategory, setSelectedCategory,
                            selectedPlatforms, setSelectedPlatforms, searchQuery, setSearchQuery, loading, refreshContent,
                            lastRefresh, categories, platforms, activeTab, setActiveTab
                        }
                    }, children);
                }

                function Header() {
                    const { searchQuery, setSearchQuery, refreshContent, loading, lastRefresh } = useContext(AppContext);

                    return React.createElement('header', { className: "bg-gradient-to-r from-blue-600 to-purple-700 text-white shadow-lg" },
                        React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-6" },
                            React.createElement('div', { className: "flex flex-col lg:flex-row items-center justify-between gap-4" },
                                React.createElement('div', { className: "flex items-center space-x-4" },
                                    React.createElement('h1', { className: "text-3xl font-bold" }, '🌊 WallNews'),
                                    React.createElement('span', { className: "text-sm opacity-75" }, 'Real-Time Social & News')
                                ),
                                React.createElement('div', { className: "flex items-center space-x-4" },
                                    React.createElement('div', { className: "flex items-center space-x-2" },
                                        React.createElement(Icon, { name: 'Search' }),
                                        React.createElement('input', {
                                            type: "text", value: searchQuery, onChange: (e) => setSearchQuery(e.target.value),
                                            placeholder: "Search news and social media...", className: "px-4 py-2 rounded-lg text-gray-900 w-64 focus:outline-none"
                                        })
                                    ),
                                    React.createElement('button', {
                                        onClick: refreshContent, disabled: loading, className: "p-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30"
                                    }, React.createElement(Icon, { name: 'RefreshCw' })),
                                    React.createElement('div', { className: "text-xs opacity-75" }, `Last update: ${lastRefresh.toLocaleTimeString()}`)
                                )
                            )
                        )
                    );
                }

                function Navigation() {
                    const { categories, platforms, selectedCategory, setSelectedCategory, selectedPlatforms, setSelectedPlatforms, activeTab, setActiveTab } = useContext(AppContext);

                    const togglePlatform = (platform) => {
                        setSelectedPlatforms(prev => prev.includes(platform) ? prev.filter(p => p !== platform) : [...prev, platform]);
                    };

                    return React.createElement('nav', { className: "bg-white shadow-sm border-b" },
                        React.createElement('div', { className: "max-w-7xl mx-auto px-4 py-4" },
                            React.createElement('div', { className: "flex items-center justify-center mb-4" },
                                React.createElement('div', { className: "flex space-x-4" },
                                    React.createElement('button', {
                                        onClick: () => setActiveTab('news'),
                                        className: `px-4 py-2 rounded-lg font-medium ${activeTab === 'news' ? 'bg-blue-600 text-white' : 'text-gray-600 hover:text-blue-600'}`
                                    }, '📰 News Articles'),
                                    React.createElement('button', {
                                        onClick: () => setActiveTab('social'),
                                        className: `px-4 py-2 rounded-lg font-medium ${activeTab === 'social' ? 'bg-purple-600 text-white' : 'text-gray-600 hover:text-purple-600'}`
                                    }, '📱 Social Media')
                                )
                            ),
                            activeTab === 'news' && React.createElement('div', { className: "flex items-center justify-center space-x-2 mb-3" },
                                React.createElement('span', { className: "text-sm font-medium text-gray-700" }, 'Categories:'),
                                React.createElement('div', { className: "flex flex-wrap gap-2 justify-center" },
                                    categories.map(category => 
                                        React.createElement('button', {
                                            key: category, onClick: () => setSelectedCategory(category),
                                            className: `px-3 py-1 rounded-full text-sm font-medium ${selectedCategory === category ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`
                                        }, category)
                                    )
                                )
                            ),
                            activeTab === 'social' && React.createElement('div', { className: "flex items-center justify-center space-x-2" },
                                React.createElement('span', { className: "text-sm font-medium text-gray-700" }, 'Platforms:'),
                                React.createElement('div', { className: "flex flex-wrap gap-2 justify-center" },
                                    platforms.map(platform => 
                                        React.createElement('button', {
                                            key: platform, onClick: () => togglePlatform(platform),
                                            className: `px-3 py-1 rounded-full text-sm font-medium capitalize ${selectedPlatforms.includes(platform) ? 'bg-purple-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`
                                        }, platform)
                                    ),
                                    selectedPlatforms.length > 0 && React.createElement('button', {
                                        onClick: () => setSelectedPlatforms([]), className: "px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700"
                                    }, 'Clear All')
                                )
                            )
                        )
                    );
                }

                function NewsCard({ article }) {
                    const [showAllSources, setShowAllSources] = useState(false);
                    const formatTime = (timestamp) => new Date(timestamp).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                    return React.createElement('div', { className: "masonry-item" },
                        React.createElement('div', { className: "news-card bg-white rounded-xl shadow-lg overflow-hidden" },
                            React.createElement('div', { className: "relative" },
                                React.createElement('img', { 
                                    src: article.imageUrl, alt: article.title, className: "w-full h-48 object-cover",
                                    onError: (e) => { e.target.src = 'https://via.placeholder.com/400x300/e2e8f0/64748b?text=News+Image'; }
                                }),
                                article.trending && React.createElement('div', { className: "absolute top-3 left-3 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1" },
                                    React.createElement(Icon, { name: 'TrendingUp', className: 'w-3 h-3' }), 'Trending'
                                ),
                                React.createElement('div', { className: "absolute top-3 right-3 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs" }, `${article.sources.length} sources`)
                            ),
                            React.createElement('div', { className: "p-6" },
                                React.createElement('div', { className: "flex items-center justify-between mb-3" },
                                    React.createElement('span', { className: "text-sm text-blue-600 font-semibold" }, article.category),
                                    React.createElement('span', { className: "text-xs text-gray-500 flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Clock', className: 'w-3 h-3' }), formatTime(article.publishedAt)
                                    )
                                ),
                                React.createElement('h3', { className: "text-lg font-bold text-gray-900 mb-2" }, article.title),
                                React.createElement('p', { className: "text-gray-600 text-sm mb-4" }, article.description),
                                React.createElement('div', { className: "bg-gray-50 rounded-lg p-4 mb-4" },
                                    React.createElement('div', { className: "flex items-center justify-between mb-3" },
                                        React.createElement('h4', { className: "text-sm font-semibold text-gray-800" }, 'Multiple Sources'),
                                        React.createElement('button', {
                                            onClick: () => setShowAllSources(!showAllSources), className: "text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1"
                                        }, showAllSources ? 'Show Less' : 'Show All',
                                            React.createElement(Icon, { name: showAllSources ? 'ChevronUp' : 'ChevronDown', className: 'w-3 h-3' })
                                        )
                                    ),
                                    React.createElement('div', { className: "space-y-2" },
                                        (showAllSources ? article.sources : article.sources.slice(0, 2)).map((source) => 
                                            React.createElement('div', { key: source.id, className: "flex items-center justify-between p-2 bg-white rounded border" },
                                                React.createElement('span', { className: "text-xs font-medium" }, source.name),
                                                React.createElement('div', { className: "flex items-center gap-2" },
                                                    React.createElement('span', { className: "text-xs text-green-600" }, `${Math.round(source.reliability * 100)}%`),
                                                    React.createElement(Icon, { name: 'ExternalLink', className: 'w-3 h-3 text-gray-400' })
                                                )
                                            )
                                        )
                                    )
                                ),
                                React.createElement('div', { className: "flex items-center justify-between text-xs text-gray-500" },
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Eye', className: 'w-3 h-3' }), article.views?.toLocaleString()
                                    ),
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Heart', className: 'w-3 h-3' }), article.likes
                                    ),
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Share2', className: 'w-3 h-3' }), article.shares
                                    )
                                )
                            )
                        )
                    );
                }

                function SocialCard({ post }) {
                    const formatTime = (timestamp) => {
                        const now = new Date();
                        const postTime = new Date(timestamp);
                        const diffMinutes = Math.floor((now - postTime) / (1000 * 60));
                        if (diffMinutes < 1) return 'Just now';
                        if (diffMinutes < 60) return `${diffMinutes}m ago`;
                        if (diffMinutes < 1440) return `${Math.floor(diffMinutes / 60)}h ago`;
                        return `${Math.floor(diffMinutes / 1440)}d ago`;
                    };

                    const getPlatformIcon = () => {
                        const iconMap = { twitter: 'Twitter', instagram: 'Instagram', linkedin: 'Linkedin', facebook: 'Facebook', tiktok: 'Play', reddit: 'MessageSquare' };
                        return React.createElement(Icon, { name: iconMap[post.platform] || 'Globe', className: 'w-4 h-4' });
                    };

                    return React.createElement('div', { className: `bg-white rounded-xl shadow-lg overflow-hidden social-platform-${post.platform} mb-4` },
                        React.createElement('div', { className: "p-6" },
                            React.createElement('div', { className: "flex items-center justify-between mb-4" },
                                React.createElement('div', { className: "flex items-center space-x-3" },
                                    React.createElement('img', { 
                                        src: post.authorAvatar, alt: post.author, className: "w-10 h-10 rounded-full",
                                        onError: (e) => { e.target.src = 'https://via.placeholder.com/40x40/e2e8f0/64748b?text=User'; }
                                    }),
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "flex items-center gap-2" },
                                            React.createElement('span', { className: "font-semibold text-gray-900" }, post.author),
                                            post.verified && React.createElement('div', { className: "w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center" },
                                                React.createElement('div', { className: "w-2 h-2 bg-white rounded-full" })
                                            ),
                                            post.isLive && React.createElement('span', { className: "live-indicator px-2 py-1 text-white text-xs rounded-full font-bold" }, 'LIVE')
                                        ),
                                        React.createElement('div', { className: "flex items-center gap-2 text-sm text-gray-500" },
                                            getPlatformIcon(), React.createElement('span', null, post.platformName), React.createElement('span', null, '•'), React.createElement('span', null, formatTime(post.timestamp))
                                        )
                                    )
                                )
                            ),
                            React.createElement('p', { className: "text-gray-800 mb-4" }, post.content),
                            post.mediaUrl && React.createElement('img', { 
                                src: post.mediaUrl, alt: "Social media content", className: "w-full h-64 object-cover rounded-lg mb-4",
                                onError: (e) => { e.target.src = 'https://via.placeholder.com/400x300/e2e8f0/64748b?text=Media+Content'; }
                            }),
                            React.createElement('div', { className: "flex items-center justify-between text-sm text-gray-500" },
                                React.createElement('div', { className: "flex items-center space-x-4" },
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Heart', className: 'w-4 h-4' }), post.likes?.toLocaleString()
                                    ),
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'MessageSquare', className: 'w-4 h-4' }), post.comments
                                    ),
                                    React.createElement('span', { className: "flex items-center gap-1" },
                                        React.createElement(Icon, { name: 'Share2', className: 'w-4 h-4' }), post.shares
                                    )
                                ),
                                React.createElement('div', { className: "flex flex-wrap gap-1" },
                                    post.hashtags.slice(0, 3).map((hashtag, i) => 
                                        React.createElement('span', { key: i, className: "text-xs bg-gray-100 text-blue-600 px-2 py-1 rounded-full" }, hashtag)
                                    )
                                )
                            )
                        )
                    );
                }

                function MainContent() {
                    const { newsArticles, socialPosts, activeTab, loading } = useContext(AppContext);

                    if (loading) {
                        return React.createElement('div', { className: "flex justify-center items-center py-12" },
                            React.createElement('div', { className: "spinner" })
                        );
                    }

                    return React.createElement('main', { className: "max-w-7xl mx-auto px-4 py-8" },
                        activeTab === 'news' ? (
                            newsArticles.length === 0 ? 
                                React.createElement('div', { className: "text-center py-12" },
                                    React.createElement('p', { className: "text-gray-500" }, 'No news articles found.')
                                ) :
                                React.createElement('div', { className: "masonry-grid" },
                                    newsArticles.map(article => React.createElement(NewsCard, { key: article.id, article }))
                                )
                        ) : (
                            socialPosts.length === 0 ? 
                                React.createElement('div', { className: "text-center py-12" },
                                    React.createElement('p', { className: "text-gray-500" }, 'No social media posts found.')
                                ) :
                                React.createElement('div', { className: "max-w-2xl mx-auto" },
                                    socialPosts.map(post => React.createElement(SocialCard, { key: post.id, post }))
                                )
                        )
                    );
                }

                function App() {
                    return React.createElement(AppProvider, null,
                        React.createElement('div', { className: "min-h-screen bg-gray-50" },
                            React.createElement(Header),
                            React.createElement(Navigation),
                            React.createElement(MainContent),
                            React.createElement('footer', { className: "bg-white border-t mt-12 py-8" },
                                React.createElement('div', { className: "max-w-7xl mx-auto px-4 text-center" },
                                    React.createElement('p', { className: "text-gray-600" }, '© 2024 WallNews - Real-Time News & Social Media Aggregator')
                                )
                            )
                        )
                    );
                }

                // Render the app
                ReactDOM.render(React.createElement(App), document.getElementById('root'));

            } catch (error) {
                console.error('Error loading WallNews:', error);
                document.getElementById('root').innerHTML = `
                    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center;">
                        <div>
                            <h2>🌊 WallNews - Loading Error</h2>
                            <p>There was an issue loading the application. Please refresh the page.</p>
                            <p style="font-size: 14px; opacity: 0.8;">Error: ${error.message}</p>
                        </div>
                    </div>
                `;
            }
        })();
    </script>
</body>
</html>
